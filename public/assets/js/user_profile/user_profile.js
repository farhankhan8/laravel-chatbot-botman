(()=>{"use strict";$(document).on("submit","#editProfileForm",(function(e){e.preventDefault();var a=jQuery(this).find("#btnPrEditSave");a.button("loading"),$.ajax({url:profileUpdateUrl,type:"post",data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(e){$("#editProfileModal").modal("hide"),location.reload()},error:function(e){manageAjaxErrors(e,"editProfileValidationErrorsBox")},complete:function(){a.button("reset")}})})),$(document).on("submit","#changeLanguageForm",(function(e){e.preventDefault();var a=jQuery(this).find("#btnLanguageChange");a.button("loading"),$.ajax({url:updateLanguageURL,type:"post",data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(e){location.reload()},error:function(e){manageAjaxErrors(e,"editProfileValidationErrorsBox")},complete:function(){a.button("reset")}})})),$(document).on("submit","#changePasswordForm",(function(e){if(e.preventDefault(),!function(){var e=$("#pfCurrentPassword").val().trim(),a=$("#pfNewPassword").val().trim(),t=$("#pfNewConfirmPassword").val().trim();if(""==e||""==a||""==t)return $("#editPasswordValidationErrorsBox").show().html("Please fill all the required fields."),!1;return!0}())return!1;var a=jQuery(this).find("#btnPrPasswordEditSave");a.button("loading"),$.ajax({url:changePasswordUrl,type:"post",data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(e){e.success&&($("#changePasswordModal").modal("hide"),displaySuccessMessage(e.message))},error:function(e){manageAjaxErrors(e)},complete:function(){a.button("reset")}})})),$("#editProfileModal").on("hidden.bs.modal",(function(){resetModalForm("#editProfileForm","#editProfileValidationErrorsBox")})),$(document).on("click",".editProfile",(function(e){$(e.currentTarget).data("id");renderProfileData()})),$(document).on("change","#profileImage",(function(){var e=$(this).val().split(".").pop().toLowerCase();-1==$.inArray(e,["gif","png","jpg","jpeg"])?($(this).val(""),$("#editProfileValidationErrorsBox").html("The profile image must be a file of type: jpeg, jpg, png.").show()):displayPhoto(this,"#editPhoto")})),window.renderProfileData=function(){$.ajax({url:profileUrl,type:"GET",success:function(e){if(e.success){var a=e.data;$("#editUserId").val(a.id),$("#firstName").val(a.first_name),$("#lastName").val(a.last_name),$("#email").val(a.email),$("#phone").val(a.phone),$("#editPhoto").attr("src",a.image_url),$("#editProfileModal").modal("show")}}})},window.displayPhoto=function(e,a){var t=!0;if(e.files&&e.files[0]){var o=new FileReader;o.onload=function(e){var o=new Image;o.src=e.target.result,o.onload=function(){$(a).attr("src",e.target.result),t=!0}},t&&(o.readAsDataURL(e.files[0]),$(a).show())}},$(document).on("click",".changeType",(function(e){var a=$(this).parent().siblings();"password"==a.attr("type")?($(this).children().addClass("icon-eye"),$(this).children().removeClass("icon-ban"),a.attr("type","text")):($(this).children().removeClass("icon-eye"),$(this).children().addClass("icon-ban"),a.attr("type","password"))})),$("#changePasswordModal").on("hidden.bs.modal",(function(){resetModalForm("#changePasswordForm","#editPasswordValidationErrorsBox")})),$("#changeLanguageModal").on("hidden.bs.modal",(function(){$("#language").val(userCurrentLanguage).trigger("change.select2")})),$("#language").select2({width:"100%"})})();