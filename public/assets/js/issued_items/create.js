(()=>{"use strict";$(document).ready((function(){$("#itemCategory, #items, #userType, #issueTo").select2({width:"100%"}),$("#issueDate").datetimepicker(DatetimepickerDefaults({format:"YYYY-MM-DD",useCurrent:!0,sideBySide:!0})),$("#returnDate").datetimepicker(DatetimepickerDefaults({format:"YYYY-MM-DD",useCurrent:!1,sideBySide:!0})),$("#issueDate").on("dp.change",(function(t){var e=moment($("#issueDate").val()).add(1,"days");$("#returnDate").data("DateTimePicker").minDate(e)})),setTimeout((function(){$("#itemCategory, #userType").trigger("change")}),300)})),$("#itemCategory").on("change",(function(){""!==$(this).val()&&$.ajax({url:itemsUrl,type:"get",dataType:"json",data:{id:$(this).val()},success:function(t){0!==t.data.length?($("#items").empty(),$("#items").removeAttr("disabled"),$.each(t.data,(function(t,e){$("#items").append($("<option></option>").attr("value",t).text(e))})),$("#items").trigger("change")):($("#items").prop("disabled",!0),$("#quantity").prop("disabled",!0),$("#quantity").val(""),$("#showAvailableQuantity").text("0"),$("#availableQuantity").val(0))}}),$("#items").empty(),$("#items").prop("disabled",!0)})),$("#userType").on("change",(function(){""!==$(this).val()&&$.ajax({url:usersUrl,type:"get",dataType:"json",data:{id:$(this).val()},success:function(t){0!==t.data.length?($("#issueTo").empty(),$("#issueTo").removeAttr("disabled"),$.each(t.data,(function(t,e){$("#issueTo").append($("<option></option>").attr("value",t).text(e))}))):$("#issueTo").prop("disabled",!0)}}),$("#issueTo").empty(),$("#issueTo").prop("disabled",!0)})),$("#items").on("change",(function(){$.ajax({url:itemAvailableQtyUrl,type:"get",dataType:"json",data:{id:$(this).val()},success:function(t){$("#availableQuantity").val(t),$("#showAvailableQuantity").text(t),$("#quantity").attr("max",t),$("#quantity").attr("disabled",!1)}})})),$("#quantity").on("change",(function(){var t=parseInt($("#availableQuantity").val()),e=parseInt($(this).val());e<=t?$("#btnSave").prop("disabled",!1):0===e?showError("Quantity cannot be zero."):showError("Quantity must be less than Available quantity.")})),window.showError=function(t){$.toast({heading:"Error",text:t,showHideTransition:"fade",icon:"error",position:"top-right"}),$("#btnSave").prop("disabled",!0)},$(document).on("submit","#createIssuedItemForm, #editIssuedItemForm",(function(){$("#btnSave").attr("disabled",!0)}))})();