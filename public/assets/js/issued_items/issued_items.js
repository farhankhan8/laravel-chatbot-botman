(()=>{"use strict";$("#filter_status").select2();var t=$("#issuedItemsTable").DataTable({processing:!0,serverSide:!0,order:[[2,"desc"]],ajax:{url:issuedItemUrl,data:function(t){t.status=$("#filter_status").find("option:selected").val()}},columnDefs:[{targets:[5,6],orderable:!1,className:"text-center",width:"10%"},{targets:[4],className:"text-right"},{targets:"_all",defaultContent:"N/A"}],columns:[{data:function(t){return'<a href="'+(issuedItemUrl+"/"+t.id)+'">'+t.item.name+"</a>"},name:"item.name"},{data:"item.itemcategory.name",name:"item.itemcategory.name"},{data:function(t){return t},render:function(t){return moment(t.issued_date).utc().format("Do MMM, Y")},name:"issued_date"},{data:function(t){return t},render:function(t){return null===t.return_date?"N/A":moment(t.return_date).utc().format("Do MMM, Y")},name:"return_date"},{data:"quantity",name:"quantity"},{data:function(t){var e=0==t.status?"Return Item":"Returned",a=0==t.status?"info":"primary",n=[{id:t.id,status:t.status,statusText:e,statusBadge:a}];return prepareTemplateRender("#issuedItemStatusTemplate",n)},name:"status"},{data:function(t){var e=issuedItemUrl+"/"+t.id,a=[{id:t.id,url:e+"/edit"}];return prepareTemplateRender("#issuedItemActionTemplate",a)},name:"id"}],fnInitComplete:function(){$("#filter_status").change((function(){$("#issuedItemsTable").DataTable().ajax.reload(null,!0)}))}});$(document).on("click",".delete-btn",(function(t){var e=$(t.currentTarget).data("id");deleteItem(issuedItemUrl+"/"+e,"#issuedItemsTable","Issued Item")})),$(document).on("click",".changes-status-btn",(function(e){var a=$(this).data("id");$(this).data("status")||swal({title:"Return Item !",text:"Are you sure want to return this item ?",type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#5cb85c",cancelButtonColor:"#d33",cancelButtonText:"No",confirmButtonText:"Yes"},(function(){$.ajax({url:returnIssuedItemUrl,type:"get",dataType:"json",data:{id:a},success:function(e){swal({title:"Item Returned!",text:e.message,type:"success",timer:2e3}),t.ajax.reload(null,!0)}})}))}))})();