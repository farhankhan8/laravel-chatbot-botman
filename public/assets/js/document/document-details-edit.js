$(document).ready((function(){"use strict";$("#editPatientId, #editDocumentTypeId").select2({width:"100%"}),$(document).on("click",".edit-btn",(function(e){if(!ajaxCallIsRunning){ajaxCallInProgress();var t=$(e.currentTarget).data("id");renderData(t)}})),window.renderData=function(e){$.ajax({url:documentsUrl+"/"+e+"/edit",type:"GET",success:function(e){if(e.success){var t=e.data.document_url.split(".").pop().toLowerCase();"pdf"==t?$("#editPreviewImage").attr("src",pdfDocumentImageUrl):"docx"==t||"doc"==t?$("#editPreviewImage").attr("src",docxDocumentImageUrl):$("#editPreviewImage").attr("src",e.data.document_url),$("#editDocumentTypeId").val(e.data.document_type_id).trigger("change.select2"),$("#editPatientId").val(e.data.patient_id).trigger("change.select2"),$("#editTitle").val(e.data.title),$("#documentUrl").attr("href",e.data.document_url),$("#documentId").val(e.data.id),$("#editNotes").val(e.data.notes),$("#EditModal").modal("show"),ajaxCallCompleted()}},error:function(e){manageAjaxErrors(e)}})},$(document).on("submit","#editForm",(function(e){e.preventDefault();var t=jQuery(this).find("#btnEditSave");t.button("loading");var o=$("#documentId").val(),a=documentsUrl+"/"+o+"/update",d={formSelector:$(this),url:a,type:"POST"};editDocumentRecord(d,t)})),window.editDocumentRecord=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#EditModal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",d=""===e.formSelector?e.formData:new FormData($(e.formSelector)[0]);$.ajax({url:e.url,type:e.type,data:d,processData:!1,contentType:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),$(o).modal("hide"),setTimeout((function(){window.location.reload()}),3e3))},error:function(e){UnprocessableInputError(e)},complete:function(){t.button("reset"),$(a).attr("disabled",!0)}})},$("#editModal").on("hidden.bs.modal",(function(){resetModalForm("#editForm","#editDocumentValidationErrorsBox")}))})),$(document).on("change","#editDocumentImage",(function(){var e=isValidDocument($(this),"#editDocumentValidationErrorsBox");isEmpty(e)||0==e||($("#editDocumentValidationErrorsBox").html("").hide(),displayDocument(this,"#editPreviewImage",e))})),window.isValidDocument=function(e,t){var o=$(e).val().split(".").pop().toLowerCase();return-1==$.inArray(o,["png","jpg","jpeg","pdf","doc","docx"])?($(e).val(""),$(t).html("The document must be a file of type: jpeg, jpg, png, pdf, doc, docx.").show(),!1):o};