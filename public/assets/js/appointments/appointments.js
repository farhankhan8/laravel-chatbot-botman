(()=>{"use strict";var t=$("#appointmentsTbl").DataTable({processing:!0,serverSide:!0,order:[[3,"desc"]],ajax:{url:appointmentUrl,data:function(t){t.is_completed=$("#status").find("option:selected").val()}},columnDefs:[{targets:[0],width:"3%",className:"text-center",orderable:!1},{targets:[4],width:"18%"},{targets:[5],orderable:!1,className:"text-center",width:"8%"},{targets:[6,7],visible:!1},{targets:"_all",defaultContent:"N/A"}],columns:[{data:function(t){var e=0==t.is_completed?"":"checked",a=[{id:t.id,checked:e}];return prepareTemplateRender("#appointmentStatusTemplate",a)},name:"is_completed"},{data:function(t){return'<a href="'+(patientUrl+"/"+t.patient.id)+'">'+t.patient.user.full_name+"</a>"},name:"patient.user.first_name"},{data:function(t){return patientRole?t.doctor.user.full_name:'<a href="'+(doctorUrl+"/"+t.doctor.id)+'">'+t.doctor.user.full_name+"</a>"},name:"doctor.user.first_name"},{data:function(t){return'<a href="'+(doctorDepartmentUrl+"/"+t.doctor.department.id)+'">'+t.doctor.department.title+"</a>"},name:"doctor.department.title"},{data:function(t){return t},render:function(t){return null===t.opd_date?"N/A":moment(t.opd_date).utc().format("Do MMM, Y h:mm A")},name:"opd_date"},{data:function(t){var e=appointmentUrl+"/"+t.id,a=[{id:t.id,url:e+"/edit",viewUrl:e,isDoctor:doctorRole}];return prepareTemplateRender("#appointmentActionTemplate",a)},name:"id"},{data:"patient.user.last_name",name:"patient.user.last_name"},{data:"doctor.user.last_name",name:"doctor.user.last_name"}],fnInitComplete:function(){$("#status").change((function(){$("#appointmentsTbl").DataTable().ajax.reload(null,!0)}))}});$(document).on("click",".delete-btn",(function(t){var e=$(t.currentTarget).data("id");deleteItem(appointmentUrl+"/"+e,"#appointmentsTbl","Appointment")})),$("#status").select2(),$(document).on("change",".status",(function(t){var e=$(t.currentTarget).data("id");updateStatus(e)})),window.updateStatus=function(e){$.ajax({url:appointmentUrl+"/"+e+"/status",method:"post",cache:!1,success:function(e){e.success&&t.ajax.reload(null,!1)}})}})();