(()=>{var __webpack_exports__={};function deleteItemAjax(url,tableId,header){var callFunction=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;$.ajax({url,type:"DELETE",dataType:"json",success:function success(obj){obj.success&&location.reload(),swal({title:"Deleted!",text:header+" has been deleted.",type:"success",timer:2e3}),callFunction&&eval(callFunction)},error:function(e){swal({title:"",text:e.responseJSON.message,type:"error",timer:5e3})}})}$(document).ready((function(){"use strict";var e="#tblIpdCharges";$(e).DataTable({processing:!0,serverSide:!0,order:[[0,"desc"]],ajax:{url:ipdChargesUrl,data:function(e){e.id=ipdPatientDepartmentId}},columnDefs:[{targets:[0,1,2,3],width:"15%"},{targets:[4,5],className:"text-right",width:"15%"},{targets:[6],className:"text-center",orderable:!1,width:"4%",visible:actionAcoumnVisibal},{targets:"_all",defaultContent:"N/A"}],columns:[{data:function(e){return e},render:function(e){return null===e.date?"N/A":moment(e.date).format("Do MMM, Y")},name:"date"},{data:function(e){return 1===e.charge_type_id?"Procedures":2===e.charge_type_id?"Investigations":3===e.charge_type_id?"Supplier":4===e.charge_type_id?"Operation Theatre":"Others"},name:"charge_type_id"},{data:"chargecategory.name",name:"chargecategory.name"},{data:"charge.code",name:"charge.code"},{data:function(e){return isEmpty(e.standard_charge)?"N/A":'<p class="cur-margin">'+getCurrentCurrencyClass()+" "+addCommas(e.standard_charge)+"</p>"},name:"standard_charge"},{data:function(e){return isEmpty(e.applied_charge)?"N/A":'<p class="cur-margin">'+getCurrentCurrencyClass()+" "+addCommas(e.applied_charge)+"</p>"},name:"applied_charge"},{data:function(e){var a=[{id:e.id}];return prepareTemplateRender("#ipdChargesActionTemplate",a)},name:"id"}]}),$("#btnIpdChargeSave,#btnEditCharges").prop("disabled",!0),$("#ipdChargeDate, #ipdEditChargeDate").datetimepicker(DatetimepickerDefaults({format:"YYYY-MM-DD",useCurrent:!1,sideBySide:!0,minDate:ipdPatientCaseDate})),$("#chargeTypeId, #chargeCategoryId, #chargeId, #editChargeTypeId, #editChargeCategoryId, #editChargeId").select2({width:"100%"}),$(document).on("click",".ipdCharegs-delete-btn",(function(a){var t=$(a.currentTarget).data("id"),r=ipdChargesUrl+"/"+t,d="IPD Charge";swal({title:"Delete !",text:'Are you sure want to delete this "IPD Charge" ?',type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#5cb85c",cancelButtonColor:"#d33",cancelButtonText:"No",confirmButtonText:"Yes"},(function(){deleteItemAjax(r,e,d)}))})),$("#chargeTypeId, #editChargeTypeId").on("change",(function(e,t){var r=$(this).data("is-charge-edit");""!==$(this).val()&&$.ajax({url:chargeCategoryUrl,type:"get",dataType:"json",data:{id:$(this).val()},beforeSend:function(){makeChargesBtnDisabled(r)},success:function(e){0!==e.data.length?($(r?"#editChargeCategoryId":"#chargeCategoryId").empty(),$(r?"#editChargeCategoryId":"#chargeCategoryId").removeAttr("disabled"),$.each(e.data,(function(e,a){$(r?"#editChargeCategoryId":"#chargeCategoryId").append($("<option></option>").attr("value",e).text(a))})),r?void 0===t?$("#editChargeCategoryId").trigger("change"):$("#editChargeCategoryId").val(a).trigger("change",t):$("#chargeCategoryId").trigger("change"),$(r?"#btnEditCharges":"#btnIpdChargeSave").prop("disabled",!1)):($(r?"#editChargeCategoryId, #editChargeId":"#chargeCategoryId, #chargeId").empty(),$(r?"#editIpdStandardCharge, #editIpdAppliedCharge":"#ipdStandardCharge, #ipdAppliedCharge").val(""),$(r?"#editChargeCategoryId, #editChargeId, #btnEditCharges":"#chargeCategoryId, #chargeId, #btnIpdChargeSave").prop("disabled",!0))}}),$(r?"#editChargeCategoryId, #editChargeId":"#chargeCategoryId, #chargeId").empty(),$(r?"#editIpdStandardCharge, #editIpdAppliedCharge":"#ipdStandardCharge, #ipdAppliedCharge").val(""),$(r?"#editChargeCategoryId, #editChargeId":"#chargeCategoryId, #chargeId").prop("disabled",!0)})),$("#chargeCategoryId, #editChargeCategoryId").on("change",(function(e,a){var r=$(this).data("is-charge-edit");""!==$(this).val()&&$.ajax({url:chargeUrl,type:"get",dataType:"json",data:{id:$(this).val()},beforeSend:function(){makeChargesBtnDisabled(r)},success:function(e){0!==e.data.length?($(r?"#editChargeId":"#chargeId").empty(),$(r?"#editChargeId":"#chargeId").removeAttr("disabled"),$.each(e.data,(function(e,a){$(r?"#editChargeId":"#chargeId").append($("<option></option>").attr("value",e).text(a))})),r?void 0===a?$("#editChargeId").trigger("change"):$("#editChargeId").val(t).trigger("change",a):$("#chargeId").trigger("change")):$(r?"#editChargeId":"#chargeId").prop("disabled",!0)}}),$(r?"#editChargeId":"#chargeId").empty(),$(r?"#editChargeId":"#chargeId").prop("disabled",!0)})),$("#chargeId, #editChargeId").on("change",(function(e,a){var t=$(this).data("is-charge-edit");$.ajax({url:chargeStandardRateUrl,type:"get",dataType:"json",data:{id:$(this).val(),isEdit:t,onceOnEditRender:a,ipdChargeId:$("#ipdChargesId").val()},beforeSend:function(){makeChargesBtnDisabled(t)},success:function(e){t?null!=e.data&&($("#editIpdStandardCharge").val(e.data.standard_charge),$("#editIpdAppliedCharge").val(e.data.applied_charge),$(".price-input").trigger("input"),$("#btnEditCharges").prop("disabled",!1)):($("#ipdStandardCharge, #ipdAppliedCharge").val(e.data),$("#btnIpdChargeSave").prop("disabled",!1))}})})),$(document).on("submit","#addIpdChargeNewForm",(function(e){e.preventDefault();var a=jQuery(this).find("#btnIpdChargeSave");a.button("loading");var t=new FormData($(this)[0]);$.ajax({url:ipdChargesCreateUrl,type:"POST",dataType:"json",data:t,processData:!1,contentType:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),$("#addIpdChargesModal").modal("hide"),location.reload())},error:function(e){printErrorMessage("#ipdChargevalidationErrorsBox",e)},complete:function(){a.button("reset"),$("#btnIpdChargeSave").attr("disabled",!0)}})})),$(document).on("click",".edit-charges-btn",(function(e){if(!ajaxCallIsRunning){ajaxCallInProgress();var a=$(e.currentTarget).data("id");renderChargesData(a)}}));var a=null,t=null,r=null;window.renderChargesData=function(e){$.ajax({url:ipdChargesUrl+"/"+e+"/edit",type:"GET",success:function(e){e.success&&(a=e.data.charge_category_id,t=e.data.charge_id,e.data.standard_charge,r=e.data.applied_charge,$("#ipdChargesId").val(e.data.id),$("#ipdEditChargeDate").val(e.data.date),$("#editChargeTypeId").val(e.data.charge_type_id).trigger("change",[{onceOnEditRender:!0}]),$(".price-input").trigger("input"),$("#appliedChargeId").text(r),$("#editIpdChargesModal").modal("show"),ajaxCallCompleted())},error:function(e){manageAjaxErrors(e)}})},$(document).on("submit","#editIpdChargesForm",(function(a){a.preventDefault();var t=jQuery(this).find("#btnEditCharges");t.button("loading");var r=$("#ipdChargesId").val(),d=ipdChargesUrl+"/"+r,i={formSelector:$(this),url:d,type:"POST",tableSelector:e};editRecord(i,t,"#editIpdChargesModal","#btnEditCharges"),location.reload()})),$("#addIpdChargesModal").on("hidden.bs.modal",(function(){$("#addIpdChargeNewForm")[0].reset(),$("#chargeTypeId, #chargeCategoryId, #chargeId, #ipdStandardCharge, #ipdAppliedCharge").val(""),$("#chargeCategoryId, #chargeId").empty(),$("#chargeTypeId").trigger("change.select2"),$("#btnIpdChargeSave").prop("disabled",!0)})),$("#editIpdChargesModal").on("hidden.bs.modal",(function(){$("#btnEditCharges").prop("disabled",!0)}))})),window.makeChargesBtnDisabled=function(e){$(e?"#btnEditCharges":"#btnIpdChargeSave").prop("disabled",!0)}})();